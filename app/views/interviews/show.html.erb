<p id="notice"><%= notice %></p>

<p>
    <strong>Slot:</strong>
    <%= @interview.slot %>
</p>

<p>
    <strong>Type:</strong>
    <%= @interview.kind %>
</p>

<p>
    <strong>Description:</strong>
    <%= @interview.description %>
</p>

<p>
    <strong>Student:</strong>
    <%= @interview.student.try(:name) %>
</p>

<p>
    <strong>User:</strong>
    <%= @interview.user_id %>
</p>

<p>
    <strong>Interviewer:</strong>
    <%= @interview.interviewer.try(:username) %>
</p>

<p>
    <strong>
        Interview_On:
    </strong>
    <%= @interview.question_category_ids %>
</p>

<% sum = 0
  if i = @interview.interview_questions.where('responce = ?', "satisfied").count
      sum+=i
  end
  if j = @interview.interview_questions.where('responce = ?', "not-satisfied").count
      j = j/2.to_f
      sum+=j
  end
%>
<p>
    <strong>
        Marks:-
    </strong>
    <b>
        <em>
            <% @interview.update(marks:sum.to_f)%>
            <%= @interview.marks %>/<%= @interview.interview_questions.count %>
        </em>
    </b>
</p>

<p>
    <strong>Remarks:</strong>
    <%= @interview.remarks %>
</p>

<h3>
    Interview Questions</h3>
<% @interview.interview_questions.all.each do |interview_question| %>
<ul>
    <li>
        <%= form_for interview_question do |f| %>
        <%= interview_question.question.try(:title)%>
        <%= f.radio_button :responce, "satisfied" %>
        Satisfied
        <%= f.radio_button :responce, "not-satisfied"  %>
        Not Satisfied
        <%= f.radio_button :responce, "not-answered" %>
        Not Answered
        <% if interview_question.responce.nil? %>
        <%= f.submit %>
        <% end %>
        <% end %>
    </li>
</ul>
<% end %>
<% if @interview.remarks.empty? %>
<%= form_for(@interview) do |f| %>
<div class="field">
    <%= f.label :remarks %><br>
    <%= f.text_area :remarks %><br>

    <%= f.submit %>
</div>
<% end %>
<% end %>

<%= link_to 'Edit', edit_interview_path(@interview) %>
|
<%= link_to 'Back', interviews_path %>
